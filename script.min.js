const lightbox = document.getElementById('lightbox'); const lbImg = document.getElementById('lightboxImg'); const lbCap = document.getElementById('lightboxCaption'); document.querySelectorAll('img.lightboxable').forEach(img => { img.style.cursor = 'zoom-in'; img.addEventListener('click', () => { lbImg.src = img.src; lbImg.alt = img.alt || ''; lbCap.textContent = img.alt || ''; lightbox.classList.add('open'); lightbox.setAttribute('aria-hidden', 'false'); }); }); lightbox.addEventListener('click', (e) => { if (e.target === lightbox || e.target.classList.contains('close')) { lightbox.classList.remove('open'); lightbox.setAttribute('aria-hidden', 'true'); lbImg.src = ''; lbCap.textContent = ''; } }); const backBtn = document.getElementById('backToTop'); window.addEventListener('scroll', () => { if (window.scrollY > 400) backBtn.classList.add('show'); else backBtn.classList.remove('show'); }); backBtn.addEventListener('click', () => window.scrollTo({ top: 0, behavior: 'smooth' })); const buttons = document.querySelectorAll('.tabbar button'); const sections = document.querySelectorAll('.app-section'); function setActive(target){ sections.forEach(s => { s.classList.remove('active'); s.setAttribute('aria-hidden','true'); }); buttons.forEach(b => b.classList.remove('active')); buttons.forEach(b => b.setAttribute('aria-selected','false')); if (target && target !== 'none'){ const el = document.getElementById(target); if (el){ el.classList.add('active'); el.setAttribute('aria-hidden','false'); const btn = document.querySelector(`.tabbar button[data-target="${target}"]`); btn?.classList.add('active'); btn?.setAttribute('aria-selected','true'); document.querySelector('.tabbar').scrollIntoView({behavior:'smooth', block:'start'}); el.querySelectorAll('.reveal').forEach(x=>x.classList.add('show')); history.replaceState(null, '', `#${target}`); } } else { history.replaceState(null, '', '#'); window.scrollTo({ top: 0, behavior: 'smooth' }); const homeBtn = document.querySelector('.tabbar button[data-target="none"]'); homeBtn?.setAttribute('aria-selected','true'); } } buttons.forEach(btn => btn.addEventListener('click', ()=> setActive(btn.dataset.target))); window.addEventListener('DOMContentLoaded', ()=>{ const hash = (location.hash || '').replace('#',''); if (hash){ setActive(hash); } document.querySelectorAll('section.hero-banner, footer').forEach(x=>x.classList.add('show')); });