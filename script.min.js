const lightbox=document.getElementById("lightbox"),lbImg=document.getElementById("lightboxImg"),lbCap=document.getElementById("lightboxCaption");document.querySelectorAll("img.lightboxable").forEach(e=>{e.style.cursor="zoom-in",e.addEventListener("click",()=>{lbImg.src=e.src,lbImg.alt=e.alt||"",lbCap.textContent=e.alt||"",lightbox.classList.add("open"),lightbox.setAttribute("aria-hidden","false")})}),lightbox.addEventListener("click",e=>{(e.target===lightbox||e.target.classList.contains("close"))&&(lightbox.classList.remove("open"),lightbox.setAttribute("aria-hidden","true"),lbImg.src="",lbCap.textContent="")});const backBtn=document.getElementById("backToTop");window.addEventListener("scroll",()=>{window.scrollY>400?backBtn.classList.add("show"):backBtn.classList.remove("show")}),backBtn.addEventListener("click",()=>window.scrollTo({top:0,behavior:"smooth"}));const buttons=document.querySelectorAll(".tabbar button"),sections=document.querySelectorAll(".app-section");function setActive(e){sections.forEach(e=>{e.classList.remove("active"),e.setAttribute("aria-hidden","true")}),buttons.forEach(e=>e.classList.remove("active")),buttons.forEach(e=>e.setAttribute("aria-selected","false")),e&&"none"!==e?(()=>{const t=document.getElementById(e);if(t){t.classList.add("active"),t.setAttribute("aria-hidden","false");const c=document.querySelector(`.tabbar button[data-target="${e}"]`);c&&c.classList.add("active"),c&&c.setAttribute("aria-selected","true"),document.querySelector(".tabbar").scrollIntoView({behavior:"smooth",block:"start"}),t.querySelectorAll(".reveal").forEach(e=>e.classList.add("show")),history.replaceState(null,"",`#${e}`)}})():(history.replaceState(null,"","#"),window.scrollTo({top:0,behavior:"smooth"}),document.querySelector('.tabbar button[data-target="none"]').setAttribute("aria-selected","true"))}buttons.forEach(e=>e.addEventListener("click",()=>setActive(e.dataset.target))),window.addEventListener("DOMContentLoaded",()=>{const e=(location.hash||"").replace("#","");e&&setActive(e),document.querySelectorAll("section.hero-banner, footer").forEach(e=>e.classList.add("show"))});